<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fifty in Style ‚Äì Countdown</title>

  <style>
    :root{
      --text: rgba(10,10,12,.92);
      --muted: rgba(10,10,12,.66);
      --line: rgba(0,0,0,.12);
      --shadow: 0 18px 60px rgba(0,0,0,.16);
      --radius: 18px;
    }

    *{ box-sizing: border-box; }
    a{ color: inherit; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      min-height: 100vh;
    }

    /* PHOTO-FIRST background + LIGHT overlay */
    body.home{
      background:
        radial-gradient(1200px 700px at 50% 10%, rgba(255,255,255,.26), rgba(255,255,255,.56)),
        url("assets/gleneagles.webp") center/cover no-repeat fixed;
    }
    @media (max-width: 900px){
      body.home{
        background:
          radial-gradient(900px 600px at 50% 10%, rgba(255,255,255,.28), rgba(255,255,255,.62)),
          url("assets/gleneagles.webp") center/cover no-repeat;
      }
    }

    .topbar{
      position: sticky; top: 0; z-index: 1000;
      background: rgba(255,255,255,.22);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,.35);
    }
    .topbar-inner{
      max-width: 980px; margin: 0 auto;
      padding: 12px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{ font-weight: 900; letter-spacing: .2px; }
    .brand small{ display:block; font-weight:650; opacity:.75; margin-top:2px; }

    .nav{ display:flex; flex-wrap:wrap; gap:8px; }
    .nav a{
      text-decoration:none;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid transparent;
    }
    .nav a:hover{
      background: rgba(255,255,255,.28);
      border-color: rgba(0,0,0,.10);
    }

    .container{ max-width: 980px; margin: 0 auto; padding: 22px 16px 44px; }

    .hero{ padding: 34px 0 10px; }
    h1{ margin: 0 0 8px; font-size: 2.6rem; }
    .sub{ margin:0; color: var(--muted); font-size: 1.08rem; }

    /* Transparent ‚Äúglass‚Äù button */
    .actions{ margin-top: 16px; display:flex; flex-wrap:wrap; gap:10px; }
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.12);   /* very transparent */
      box-shadow: var(--shadow);
      text-decoration:none;
      cursor: pointer;
      color: var(--text);
      backdrop-filter: blur(12px);
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.20); }

    /* Single transparent countdown card */
    .card{
      margin-top: 22px;
      background: rgba(255,255,255,.14);   /* very transparent */
      border: 1px solid rgba(0,0,0,.12);
      border-radius: var(--radius);
      padding: 16px 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      max-width: 760px;
    }
    .card h2{ margin:0 0 10px; font-size: 1.18rem; }
    .muted{ color: var(--muted); }

    .badges{ display:flex; flex-wrap:wrap; gap:8px; margin-top: 10px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.18);  /* transparent */
      color: rgba(10,10,12,.88);
      font-size: 1.04rem;
    }

    .footer{
      margin-top: 22px;
      color: rgba(10,10,12,.62);
      font-size: .9rem;
    }
  </style>
</head>

<body class="home">
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        Fifty in Style
        <small>Gleneagles ‚Ä¢ 15‚Äì19 april 2026</small>
      </div>
      <nav class="nav">
        <a href="programma.html">üóìÔ∏è Programma</a>
        <a href="programma.pdf">üìÑ PDF</a>
      </nav>
    </div>
  </div>

  <main class="container">
    <header class="hero">
      <h1>Countdown</h1>
      <p class="sub">Op naar Scotland ‚Äî ‚ÄúFifty in Style‚Äù.</p>

      <section class="card" aria-label="Countdown">
        <h2>‚è≥ Nog even‚Ä¶</h2>
        <div class="badges" id="countdownBadges" aria-live="polite">
          <span class="badge">‚Äî dagen</span>
          <span class="badge">‚Äî uur</span>
          <span class="badge">‚Äî min</span>
          <span class="badge">‚Äî sec</span>
        </div>
      </section>

      <div class="actions">
        <button class="btn" id="addToCalendarBtn" type="button">üìÖ Add to Calendar</button>
      </div>

      <div class="footer">¬© Fifty in Style ‚Äî Gleneagles, Scotland</div>
    </header>
  </main>

  <script>
    // Countdown target: 15/04/2026 11:10 Europe/Brussels
    // We compute it robustly by taking the Brussels local clock time (11:10)
    // and converting it to an absolute UTC timestamp using Intl.
    //
    // This avoids relying on the user's device timezone.

    function getBrusselsTargetUTC() {
      // 2026-04-15 11:10 in Europe/Brussels
      const partsToISO = (parts) => {
        const map = Object.fromEntries(parts.map(p => [p.type, p.value]));
        return `${map.year}-${map.month}-${map.day}T${map.hour}:${map.minute}:${map.second || "00"}`;
      };

      // Start with a naive date in UTC, then adjust by the Brussels offset at that moment
      // Approach:
      // 1) Create a Date from the same wall-clock time interpreted as UTC.
      // 2) Find what Brussels time that Date corresponds to.
      // 3) Offset-correct.
      const assumedUTC = new Date(Date.UTC(2026, 3, 15, 11, 10, 0)); // 11:10Z assumption
      const fmt = new Intl.DateTimeFormat("en-GB", {
        timeZone: "Europe/Brussels",
        year: "numeric", month: "2-digit", day: "2-digit",
        hour: "2-digit", minute: "2-digit", second: "2-digit",
        hourCycle: "h23"
      });

      // What is the Brussels wall-clock time for assumedUTC?
      const parts = fmt.formatToParts(assumedUTC);
      const isoLocal = partsToISO(parts);

      // Parse that wall-clock time as if it were UTC again
      const brusselsAsUTC = new Date(isoLocal + "Z");

      // Desired Brussels wall-clock time as UTC-parsed
      const desiredAsUTC = new Date(Date.UTC(2026, 3, 15, 11, 10, 0));

      // The difference between desired and what we got tells us the offset error
      const deltaMs = desiredAsUTC.getTime() - brusselsAsUTC.getTime();

      return new Date(assumedUTC.getTime() + deltaMs);
    }

    const target = getBrusselsTargetUTC();
    const badgesEl = document.getElementById("countdownBadges");
    const pad = (n) => String(n).padStart(2, "0");

    function tick(){
      const now = new Date();
      const diff = target.getTime() - now.getTime();

      if (diff <= 0){
        badgesEl.innerHTML = `<span class="badge">üéâ Het is zover!</span><span class="badge">Scotland time</span>`;
        return;
      }

      const s = Math.floor(diff / 1000);
      const days = Math.floor(s / 86400);
      const hours = Math.floor((s % 86400) / 3600);
      const mins = Math.floor((s % 3600) / 60);
      const secs = s % 60;

      badgesEl.innerHTML = `
        <span class="badge"><strong>${days}</strong> dagen</span>
        <span class="badge"><strong>${pad(hours)}</strong> uur</span>
        <span class="badge"><strong>${pad(mins)}</strong> min</span>
        <span class="badge"><strong>${pad(secs)}</strong> sec</span>
      `;
    }
    tick();
    setInterval(tick, 1000);

    // Add to Calendar (all-day trip block + departure time in description)
    function downloadICS(){
      const dtstamp = new Date().toISOString().replace(/[-:]/g,'').split('.')[0] + "Z";
      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Fifty in Style//Gleneagles//NL
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:fiftyinstyle-20260415@obouckenooghe.github.io
DTSTAMP:${dtstamp}
SUMMARY:Fifty in Style ‚Äì Gleneagles (Scotland)
DTSTART;VALUE=DATE:20260415
DTEND;VALUE=DATE:20260420
DESCRIPTION:Trip 15‚Äì19 April 2026. Countdown target: 15/04/2026 11:10 (Europe/Brussels). See programma.html for details.
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], { type: "text/calendar;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "Fifty-in-Style_Gleneagles_15-19Apr2026.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }
    document.getElementById("addToCalendarBtn").addEventListener("click", downloadICS);
  </script>
</body>
</html>
